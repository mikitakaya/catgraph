<style>
 table {
  width: 800px;
  margin: 0 auto 30px;
  border-bottom: 3px solid #d9d9d9;
 }

 .profile_image {
   border-radius: 50%; /* プロフィール画像の形を丸にする */
   object-fit: cover; /* 中央でトリミング */
  }

  .user_show {
   cursor: pointer;
  }

  .btn-light {
   color: #212529;
   background-color: #fff;
   border: 2px solid #666666;
  }

  th, td {
   padding: 10px;
  }

  .user {
   width: 150px;
   padding-left: 0px;
  }

  .follow {
   width: 200px;
  }

  .introduction {
   width: 400px;
   word-break: break-all;
  }
</style>

<table>
 <% users.each do |user| %>
  <tbody style="display:flex;">
   <tr onclick='window.location="<%= user_path(user) %>"' role="link", class="user_show">
    <th>
     <%= image_tag user.get_profile_image(70, 70), class: "profile_image" %>
    </th>

    <th class="user">
     <%= user.name %><br />
     <%= user.username %>
    </th>

    <td class="introduction">
     <%= user.introduction %>
    </td>
   </tr>

   <tr>
    <th class="follow">
     <% if user != current_user %>
      <% if current_user.following?(user) %>
       <%= link_to "フォロー中", user_relationships_path(user.id), class: "btn btn-light", method: :delete %>
      <% else %>
       <%= link_to "フォローする", user_relationships_path(user.id), class: "btn", method: :post %>
      <% end %>
     <% end %><br />

     <!-- ユーザーはログイン中ユーザーをフォローしていますか？ -->
     <% if user.following?(current_user) %>
      <p>フォローされています</p>
     <% end %>
    </th>
   </tr>
  </tbody>
 <% end %>
</table>